name: Exploring Variables and secrets

on:
    workflow_dispatch: 
      inputs:
        logLevel:
            description: 'Log level'
            required: true
            default: 'warning'
            type: choice
            options:
            - info
            - warning
            - debug
        tags:
            description: 'Test scenario tags'
            required: false
            type: boolean
        environment:
            description: 'Environment to run tests against'
            type: environment
            required: true
    # schedule:
    #   - cron: "*/1 * * * *"

env:
    CONTAINER_REGISTRY: docker.io
   # DOCKER_USERNAME: Tanveer369
    IMAGE_NAME: github-actions-nginx
jobs:
  log-the-inputs:
    runs-on: ubuntu-latest
    steps:
    - name: parametrized input
      env:
        LEVEL: ${{ inputs.logLevel }}
        TAGS: ${{ inputs.tags }}
        ENVIRONMENT: ${{ inputs.environment }}
      run: |
        echo "Log level: $LEVEL"
        echo "Tags: $TAGS"
        echo "Environment: $ENVIRONMENT"
#   docker:
#     runs-on: ubuntu-latest
#     steps:
#     - name: Docker Build
#       run: docker build -t docker.io/dockerUsername/imageName:latest

#     - name: Docker login
#       run: docker login --username=dockerUsername --password=sgsfdgfhhd

#     - name: Docker Publish
#       run: docker push docker.io/dockerUsername/imageName:latest

#   deploy:
#     needs: docker
#     runs-on: ubuntu-latest
#     steps:
#     - name: Docker Run
#       run: docker run -d -p 8080:80 docker.io/dockerUsername/imageName:latest

###### Env Variables at STEP Level ######

#   docker:
#     runs-on: ubuntu-latest
#     steps:
#     - name: Docker Build
#       env:
#         CONTAINER_REGISTRY: docker.io
#         DOCKER_USERNAME: Tanveer369
#         IMAGE_NAME: github-actions-nginx
#       run: docker build -t ${{ env.CONTAINER_REGISTRY }}/${{ vars.DOCKER_USERNAME }}/$IMAGE_NAME:latest

#     - name: Docker login
#       run: docker login --username=dockerUsername --password=sgsfdgfhhd

#     - name: Docker Publish
#       run: docker push docker.io/dockerUsername/imageName:latest

#   deploy:
#     needs: docker
#     runs-on: ubuntu-latest
#     steps:
#     - name: Docker Run
#       run: docker run -d -p 8080:80 docker.io/dockerUsername/imageName:latest

###### Env Variables at Job Level ######
#   docker:
#     env:
#         CONTAINER_REGISTRY: docker.io
#         DOCKER_USERNAME: Tanveer369
#         IMAGE_NAME: github-actions-nginx
#     runs-on: ubuntu-latest
#     steps:
#     - name: Docker Build
#       run: docker build -t ${{ env.CONTAINER_REGISTRY }}/${{ vars.DOCKER_USERNAME }}/$IMAGE_NAME:latest

#     - name: Docker login
#       run: docker login --username=dockerUsername --password=sgsfdgfhhd

#     - name: Docker Publish
#       run: docker push docker.io/dockerUsername/imageName:latest

#   deploy:
#     env:
#         CONTAINER_REGISTRY: docker.io
#         DOCKER_USERNAME: Tanveer369
#         IMAGE_NAME: github-actions-nginx
#     needs: docker
#     runs-on: ubuntu-latest
#     steps:
#     - name: Docker Run
#       run: docker run -d -p 8080:80 ${{ env.CONTAINER_REGISTRY }}/${{ vars.DOCKER_USERNAME }}/$IMAGE_NAME:latest

###### Env Variables at workflow Level ######
  docker:
    runs-on: ubuntu-latest
    steps:
    - name: Docker Build
      run: echo "docker build -t ${{ env.CONTAINER_REGISTRY }}/${{ vars.DOCKER_USERNAME }}/$IMAGE_NAME:latest"

    - name: Docker login
      run: echo "docker login --username=${{ vars.DOCKER_USERNAME }} --password=${{ secrets.DOCKER_PASSWORD }}"

    - name: Docker Publish
      run: echo "docker push docker.io/${{ vars.DOCKER_USERNAME }}/imageName:latest"

  deploy:
    needs: docker
    runs-on: ubuntu-latest
    steps:
    - name: Docker Run
      run: echo "docker run -d -p 8080:80 ${{ env.CONTAINER_REGISTRY }}/${{ vars.DOCKER_USERNAME }}/$IMAGE_NAME:latest"